# 迅睿CMS 中国地区联动菜单数据

## 简介

本项目提供完整的中国大陆地区省、市、区县、街道四级联动菜单数据，适用于迅睿CMS（XunRuiCMS）系统。根据不同使用场景，数据分为四个层级文件，方便按需导入。

- **地区范围**: 全国31个省级行政区
- **更新时间**: 2022年10月31日

### 数据层级说明

| 层级 | 文件 | 数据量 | 包含内容 | 适用场景 |
|------|------|--------|----------|----------|
| 一级 | 中国地区一级.json / dr_linkage_data_1.sql | 31条 | 省级（省、自治区、直辖市） | 简单地区选择，仅需省级 |
| 二级 | 中国地区二级.json / dr_linkage_data_2.sql | 373条 | 省、市两级 | 省市级联动选择 |
| 三级 | 中国地区三级.json / dr_linkage_data_3.sql | 3351条 | 省、市、区县三级 | 省市区县三级联动 |
| 四级 | 中国地区四级.json / dr_linkage_data_4.sql | 44,703条 | 省、市、区县、街道四级完整数据 | 精细到街道/乡镇的完整联动 |

## 文件说明

```
.
├── 中国地区一级.json          # 一级（省级）JSON格式数据文件
├── 中国地区二级.json          # 二级（省市）JSON格式数据文件
├── 中国地区三级.json          # 三级（省市区县）JSON格式数据文件
├── 中国地区四级.json          # 四级（省市区县街道）JSON格式数据文件
├── dr_linkage_data_1.sql      # 一级（省级）MySQL数据库导出文件
├── dr_linkage_data_2.sql      # 二级（省市）MySQL数据库导出文件
├── dr_linkage_data_3.sql      # 三级（省市区县）MySQL数据库导出文件
└── dr_linkage_data_4.sql      # 四级（省市区县街道）MySQL数据库导出文件
```

### 文件对比

| 文件 | 格式 | 数据量 | 大小 | 用途 |
|------|------|--------|------|------|
| 中国地区一级.json | JSON | 31条 | ~5KB | 后台导入省级数据 |
| 中国地区二级.json | JSON | 373条 | ~56KB | 后台导入省市级数据 |
| 中国地区三级.json | JSON | 3351条 | ~550KB | 后台导入省市区县数据 |
| 中国地区四级.json | JSON | 44,703条 | ~8.3MB | 后台导入完整四级数据 |
| dr_linkage_data_1.sql | SQL | 31条 | ~4KB | 数据库导入省级数据 |
| dr_linkage_data_2.sql | SQL | 373条 | ~27KB | 数据库导入省市级数据 |
| dr_linkage_data_3.sql | SQL | 3351条 | ~270KB | 数据库导入省市区县数据 |
| dr_linkage_data_4.sql | SQL | 44,703条 | ~4.7MB | 数据库导入完整四级数据 |

## 使用方法

### 方法一：后台导入JSON文件（推荐）

**步骤**：
1. 登录迅睿CMS后台
2. 进入 **应用** → **联动菜单**
3. 创建或选择联动菜单（如：地区联动）
4. 点击 **导入数据** 按钮
5. 根据需要选择对应层级的JSON文件上传：
   - 仅需省级选择 → 上传 `中国地区一级.json`
   - 需要省市两级 → 上传 `中国地区二级.json`
   - 需要省市区县三级 → 上传 `中国地区三级.json`
   - 需要完整四级数据 → 上传 `中国地区四级.json`
6. 等待导入完成

### 方法二：直接导入MySQL数据库

**步骤**：
1. 确认数据表前缀（默认为 `dr_`）
2. 根据前缀修改表名（如改为 `your_prefix_linkage_data_1`）
3. 根据需要选择对应层级的SQL文件执行导入：

```bash
# 一级（省级）
mysql -u用户名 -p 数据库名 < dr_linkage_data_1.sql

# 二级（省市）
mysql -u用户名 -p 数据库名 < dr_linkage_data_2.sql

# 三级（省市区县）
mysql -u用户名 -p 数据库名 < dr_linkage_data_3.sql

# 四级（完整数据）
mysql -u用户名 -p 数据库名 < dr_linkage_data_4.sql

# 或使用phpMyAdmin导入
```

**注意事项**:
- 请根据实际数据表前缀修改SQL文件中的表名
- 本文件默认前缀为 `dr_`
- 确保目标数据库字符集为 `utf8mb4`

## 数据结构

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| id | mediumint(8) | 地区唯一标识 |
| site | mediumint(5) | 站点ID |
| pid | mediumint(8) | 上级地区ID（0表示省级） |
| pids | varchar(255) | 所有上级ID链（如: 0,1,2） |
| name | varchar(30) | 地区名称 |
| cname | varchar(30) | 地区别名/代码 |
| child | tinyint(1) | 是否有下级（1=是，0=否） |
| hidden | tinyint(1) | 前端是否隐藏（1=是，0=否） |
| childids | text | 所有下级ID（逗号分隔） |
| displayorder | mediumint(8) | 显示排序 |

### 层级示例

**一级结构（仅省级）**：
```
北京市 (id=1, pid=0)
天津市 (id=2, pid=0)
河北省 (id=3, pid=0)
...
```

**二级结构（省市）**：
```
北京市 (id=1, pid=0)
  └─ 市辖区 (id=2, pid=1)
河北省 (id=3, pid=0)
  ├─ 石家庄市 (id=4, pid=3)
  ├─ 唐山市 (id=5, pid=3)
  └─ ...
```

**三级结构（省市区县）**：
```
北京市 (id=1, pid=0)
  └─ 市辖区 (id=2, pid=1)
      ├─ 东城区 (id=3, pid=2)
      ├─ 西城区 (id=4, pid=2)
      └─ ...
```

**四级结构（完整数据）**：
```
北京市 (id=1, pid=0)
  └─ 市辖区 (id=2, pid=1)
      └─ 东城区 (id=3, pid=2)
          ├─ 东华门街道 (id=4, pid=3)
          ├─ 景山街道 (id=5, pid=3)
          └─ ...
```

## 应用场景

### 按层级选择

| 应用场景 | 推荐层级 | 说明 |
|----------|----------|------|
| 简单用户来源统计 | 一级 | 仅需知道用户所在省份 |
| 区域代理商管理 | 二级 | 按省市划分代理商区域 |
| 电商收货地址 | 三级 | 常用到省市区县，街道可选填 |
| 物流配送范围 | 四级 | 需要精确到街道/乡镇 |
| 精准营销推送 | 四级 | 基于精细化地理位置推送 |

### 典型应用

- 用户注册时的地区选择
- 内容发布时的地区分类
- 企业地址信息的录入
- 电商系统的收货地址
- 数据统计分析的地区筛选
- 物流配送区域管理

## 数据特点

- ✓ 完整覆盖全国31个省级行政区
- ✓ 包含地级市、区县、街道/乡镇的完整层级
- ✓ 含新疆生产建设兵团的团场数据
- ✓ 支持快速查询下级地区
- ✓ 支持追溯完整上级路径
- ✓ 数据结构清晰，易于二次开发

## 迅睿CMS联动菜单说明

- 联动菜单是迅睿CMS的核心功能之一
- 数据表名格式: `{prefix}linkage_data_{菜单ID}`
- 本数据默认使用菜单ID为1，可根据需要调整
- 支持多站点共享同一联动菜单数据

## 版本历史

- **v2.0** - 数据分层版本，提供一/二/三/四级四个层级的独立文件，方便按需导入
- **v1.0** - 初始版本，包含完整的四级联动数据

## 许可证

MIT License

## 注意事项

1. **选择合适的层级**：根据实际需求选择对应层级，避免导入不必要的数据
   - 数据量越大，页面加载和查询速度越慢
   - 建议从低层级开始，按需升级到更高层级
2. 导入前请备份数据库
3. 确认数据表前缀是否一致
4. 大数据量导入可能需要较长时间，请耐心等待
   - 一级/二级：通常几秒内完成
   - 三级：约10-30秒
   - 四级：可能需要1-3分钟
5. 如需更新数据，请先清空原有数据再导入
6. 不同层级的数据可以导入到不同的联动菜单中，互不影响

---

**联系作者**：QQ：1445227103